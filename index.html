<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savings Tracker | 100M UGX Goal</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #e0e7ff;
            --secondary: #3f37c9;
            --dark: #1e1e1e;
            --light: #f8f9fa;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --info: #4895ef;
            --border-radius: 12px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .date-display {
            font-size: 1rem;
            color: #666;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark);
        }

        .card-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .card-description {
            color: #666;
            font-size: 0.9rem;
        }

        .progress-container {
            margin-top: 1rem;
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .savings-goal {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .savings-goal .card-value {
            color: white;
        }

        .savings-goal .card-description {
            color: rgba(255, 255, 255, 0.8);
        }

        .countdown-card {
            background-color: var(--primary-light);
        }

        .expense-card {
            border-left: 4px solid var(--danger);
        }

        .income-card {
            border-left: 4px solid var(--success);
        }

        .alcohol-free-card {
            border-left: 4px solid var(--info);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        input, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 1rem;
            transition: var(--transition);
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        button:hover {
            background-color: var(--secondary);
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #d1145a;
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #4bb3fd;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 2rem 0 1rem;
            color: var(--dark);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background-color: var(--primary-light);
            font-weight: 600;
        }

        tr:last-child td {
            border-bottom: none;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-success {
            background-color: #d1fae5;
            color: #065f46;
        }

        .badge-danger {
            background-color: #fee2e2;
            color: #b91c1c;
        }

        .badge-warning {
            background-color: #fef3c7;
            color: #92400e;
        }

        .badge-info {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-bottom: 2rem;
        }

        .recommendations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .recommendation-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--warning);
        }

        .recommendation-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .recommendation-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .recommendation-source {
            font-size: 0.8rem;
            color: #999;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }

        .tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Savings Tracker</h1>
            <div class="date-display" id="current-date"></div>
        </header>

        <div class="dashboard">
            <div class="card savings-goal">
                <div class="card-header">
                    <div class="card-title">100M UGX Goal</div>
                    <div class="card-percentage" id="savings-percentage">0%</div>
                </div>
                <div class="card-value" id="savings-amount">UGX 0</div>
                <div class="card-description">of UGX 100,000,000</div>
                <div class="progress-container">
                    <div class="progress-bar" id="savings-progress" style="width: 0%"></div>
                </div>
            </div>

            <div class="card countdown-card">
                <div class="card-header">
                    <div class="card-title">Countdown</div>
                </div>
                <div class="card-value" id="countdown">19 months</div>
                <div class="card-description">to reach your goal</div>
            </div>

            <div class="card income-card">
                <div class="card-header">
                    <div class="card-title">Total Income</div>
                </div>
                <div class="card-value" id="total-income">UGX 0</div>
                <div class="card-description">This month</div>
            </div>

            <div class="card expense-card">
                <div class="card-header">
                    <div class="card-title">Total Expenses</div>
                </div>
                <div class="card-value" id="total-expenses">UGX 0</div>
                <div class="card-description">This month</div>
            </div>

            <div class="card alcohol-free-card">
                <div class="card-header">
                    <div class="card-title">Alcohol-Free</div>
                </div>
                <div class="card-value" id="alcohol-free-days">0 days</div>
                <div class="card-description">19 month challenge</div>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" data-tab="transactions">Transactions</div>
            <div class="tab" data-tab="expenses">Expenses</div>
            <div class="tab" data-tab="savings-plan">Savings Plan</div>
        </div>

        <div class="tab-content active" id="transactions-tab">
            <div class="form-group">
                <button id="add-transaction-btn">Add Transaction</button>
            </div>

            <div class="modal" id="transaction-modal" style="display: none;">
                <div class="modal-content">
                    <h2>Add New Transaction</h2>
                    <form id="transaction-form">
                        <div class="form-group">
                            <label for="transaction-type">Type</label>
                            <select id="transaction-type" required>
                                <option value="income">Income</option>
                                <option value="expense">Expense</option>
                                <option value="savings">Savings Deposit</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transaction-amount">Amount (UGX)</label>
                            <input type="number" id="transaction-amount" required>
                        </div>
                        <div class="form-group">
                            <label for="transaction-date">Date</label>
                            <input type="date" id="transaction-date" required>
                        </div>
                        <div class="form-group">
                            <label for="transaction-description">Description</label>
                            <input type="text" id="transaction-description" required>
                        </div>
                        <div class="form-group">
                            <label for="transaction-category">Category</label>
                            <select id="transaction-category" required>
                                <option value="salary">Salary</option>
                                <option value="business">Business Income</option>
                                <option value="investment">Investment</option>
                                <option value="other">Other Income</option>
                            </select>
                        </div>
                        <button type="submit">Save Transaction</button>
                        <button type="button" id="cancel-transaction">Cancel</button>
                    </form>
                </div>
            </div>

            <table id="transactions-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Description</th>
                        <th>Type</th>
                        <th>Amount (UGX)</th>
                        <th>Category</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Transactions will be added here dynamically -->
                </tbody>
            </table>
        </div>

        <div class="tab-content" id="expenses-tab">
            <div class="form-group">
                <button id="add-expense-btn">Add Expense</button>
            </div>

            <div class="modal" id="expense-modal" style="display: none;">
                <div class="modal-content">
                    <h2>Add New Expense</h2>
                    <form id="expense-form">
                        <div class="form-group">
                            <label for="expense-amount">Amount (UGX)</label>
                            <input type="number" id="expense-amount" required>
                        </div>
                        <div class="form-group">
                            <label for="expense-date">Date</label>
                            <input type="date" id="expense-date" required>
                        </div>
                        <div class="form-group">
                            <label for="expense-description">Description</label>
                            <input type="text" id="expense-description" required>
                        </div>
                        <div class="form-group">
                            <label for="expense-category">Category</label>
                            <select id="expense-category" required>
                                <option value="housing">Housing</option>
                                <option value="food">Food</option>
                                <option value="transport">Transport</option>
                                <option value="entertainment">Entertainment</option>
                                <option value="health">Health</option>
                                <option value="education">Education</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <button type="submit">Save Expense</button>
                        <button type="button" id="cancel-expense">Cancel</button>
                    </form>
                </div>
            </div>

            <div class="chart-container">
                <canvas id="expenses-chart"></canvas>
            </div>

            <table id="expenses-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Description</th>
                        <th>Amount (UGX)</th>
                        <th>Category</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Expenses will be added here dynamically -->
                </tbody>
            </table>
        </div>

        <div class="tab-content" id="savings-plan-tab">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Monthly Savings Plan</div>
                </div>
                <div class="card-value" id="monthly-target">UGX 5,263,158</div>
                <div class="card-description">Required monthly to reach 100M in 19 months</div>
            </div>

            <div class="chart-container">
                <canvas id="savings-chart"></canvas>
            </div>

            <div class="form-group">
                <label for="savings-adjustment">Adjust Savings Plan</label>
                <select id="savings-adjustment">
                    <option value="increase">Increase Monthly Savings</option>
                    <option value="decrease">Decrease Monthly Savings</option>
                    <option value="extend">Extend Timeline</option>
                    <option value="reduce">Reduce Goal Amount</option>
                </select>
                <button id="update-plan-btn">Update Plan</button>
            </div>
        </div>

        <h2 class="section-title">Financial Recommendations</h2>
        <div class="recommendations" id="recommendations-container">
            <!-- Recommendations will be added here dynamically -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Global variables
        let transactions = [];
        let expenses = [];
        let savingsBalance = 0;
        let alcoholFreeStartDate = new Date();
        let monthlySavingsTarget = 5263158; // 100M / 19 months

        // DOM elements
        const currentDateEl = document.getElementById('current-date');
        const savingsAmountEl = document.getElementById('savings-amount');
        const savingsPercentageEl = document.getElementById('savings-percentage');
        const savingsProgressEl = document.getElementById('savings-progress');
        const countdownEl = document.getElementById('countdown');
        const totalIncomeEl = document.getElementById('total-income');
        const totalExpensesEl = document.getElementById('total-expenses');
        const alcoholFreeDaysEl = document.getElementById('alcohol-free-days');
        const transactionsTableEl = document.querySelector('#transactions-table tbody');
        const expensesTableEl = document.querySelector('#expenses-table tbody');
        const monthlyTargetEl = document.getElementById('monthly-target');
        const recommendationsContainerEl = document.getElementById('recommendations-container');

        // Modal elements
        const transactionModalEl = document.getElementById('transaction-modal');
        const transactionFormEl = document.getElementById('transaction-form');
        const addTransactionBtnEl = document.getElementById('add-transaction-btn');
        const cancelTransactionBtnEl = document.getElementById('cancel-transaction');
        
        const expenseModalEl = document.getElementById('expense-modal');
        const expenseFormEl = document.getElementById('expense-form');
        const addExpenseBtnEl = document.getElementById('add-expense-btn');
        const cancelExpenseBtnEl = document.getElementById('cancel-expense');

        // Tab elements
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date
            updateCurrentDate();
            
            // Load data from localStorage
            loadData();
            
            // Update UI
            updateDashboard();
            renderTransactions();
            renderExpenses();
            renderRecommendations();
            
            // Initialize charts
            initCharts();
            
            // Set up event listeners
            setupEventListeners();
        });

        function updateCurrentDate() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            currentDateEl.textContent = now.toLocaleDateString('en-US', options);
        }

        function loadData() {
            // Load data from localStorage or initialize if empty
            const savedTransactions = localStorage.getItem('transactions');
            const savedExpenses = localStorage.getItem('expenses');
            const savedSavings = localStorage.getItem('savingsBalance');
            const savedAlcoholFreeDate = localStorage.getItem('alcoholFreeStartDate');
            
            if (savedTransactions) {
                transactions = JSON.parse(savedTransactions);
            }
            
            if (savedExpenses) {
                expenses = JSON.parse(savedExpenses);
            }
            
            if (savedSavings) {
                savingsBalance = parseFloat(savedSavings);
            }
            
            if (savedAlcoholFreeDate) {
                alcoholFreeStartDate = new Date(savedAlcoholFreeDate);
            } else {
                // Set start date to today if not set
                alcoholFreeStartDate = new Date();
                localStorage.setItem('alcoholFreeStartDate', alcoholFreeStartDate.toISOString());
            }
        }

        function saveData() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
            localStorage.setItem('expenses', JSON.stringify(expenses));
            localStorage.setItem('savingsBalance', savingsBalance.toString());
            localStorage.setItem('alcoholFreeStartDate', alcoholFreeStartDate.toISOString());
        }

        function updateDashboard() {
            // Update savings goal
            const goalAmount = 100000000; // 100M UGX
            const percentage = (savingsBalance / goalAmount) * 100;
            
            savingsAmountEl.textContent = `UGX ${savingsBalance.toLocaleString()}`;
            savingsPercentageEl.textContent = `${percentage.toFixed(1)}%`;
            savingsProgressEl.style.width = `${percentage}%`;
            
            // Update countdown (19 months from today)
            const today = new Date();
            const targetDate = new Date(today);
            targetDate.setMonth(targetDate.getMonth() + 19);
            
            const diffTime = Math.abs(targetDate - today);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const remainingMonths = Math.floor(diffDays / 30);
            const remainingDays = diffDays % 30;
            
            countdownEl.textContent = `${remainingMonths} months ${remainingDays} days`;
            
            // Calculate total income and expenses for current month
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();
            
            const monthlyIncome = transactions
                .filter(t => t.type === 'income' && 
                             new Date(t.date).getMonth() === currentMonth && 
                             new Date(t.date).getFullYear() === currentYear)
                .reduce((sum, t) => sum + t.amount, 0);
                
            const monthlyExpenses = expenses
                .filter(e => new Date(e.date).getMonth() === currentMonth && 
                            new Date(e.date).getFullYear() === currentYear)
                .reduce((sum, e) => sum + e.amount, 0);
                
            totalIncomeEl.textContent = `UGX ${monthlyIncome.toLocaleString()}`;
            totalExpensesEl.textContent = `UGX ${monthlyExpenses.toLocaleString()}`;
            
            // Calculate alcohol-free days
            const diffAlcoholFree = Math.abs(today - alcoholFreeStartDate);
            const alcoholFreeDays = Math.ceil(diffAlcoholFree / (1000 * 60 * 60 * 24));
            alcoholFreeDaysEl.textContent = `${alcoholFreeDays} days`;
            
            // Update monthly target
            monthlyTargetEl.textContent = `UGX ${monthlySavingsTarget.toLocaleString()}`;
        }

        function renderTransactions() {
            transactionsTableEl.innerHTML = '';
            
            // Sort transactions by date (newest first)
            const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedTransactions.forEach((transaction, index) => {
                const row = document.createElement('tr');
                
                const dateCell = document.createElement('td');
                dateCell.textContent = new Date(transaction.date).toLocaleDateString();
                
                const descCell = document.createElement('td');
                descCell.textContent = transaction.description;
                
                const typeCell = document.createElement('td');
                const typeBadge = document.createElement('span');
                typeBadge.className = 'badge';
                
                if (transaction.type === 'income') {
                    typeBadge.classList.add('badge-success');
                    typeBadge.textContent = 'Income';
                } else if (transaction.type === 'expense') {
                    typeBadge.classList.add('badge-danger');
                    typeBadge.textContent = 'Expense';
                } else {
                    typeBadge.classList.add('badge-info');
                    typeBadge.textContent = 'Savings';
                }
                
                typeCell.appendChild(typeBadge);
                
                const amountCell = document.createElement('td');
                amountCell.textContent = `UGX ${transaction.amount.toLocaleString()}`;
                
                const categoryCell = document.createElement('td');
                categoryCell.textContent = transaction.category;
                
                const actionsCell = document.createElement('td');
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn-danger';
                deleteBtn.textContent = 'Delete';
                deleteBtn.addEventListener('click', () => deleteTransaction(index));
                
                actionsCell.appendChild(deleteBtn);
                
                row.appendChild(dateCell);
                row.appendChild(descCell);
                row.appendChild(typeCell);
                row.appendChild(amountCell);
                row.appendChild(categoryCell);
                row.appendChild(actionsCell);
                
                transactionsTableEl.appendChild(row);
            });
        }

        function renderExpenses() {
            expensesTableEl.innerHTML = '';
            
            // Sort expenses by date (newest first)
            const sortedExpenses = [...expenses].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedExpenses.forEach((expense, index) => {
                const row = document.createElement('tr');
                
                const dateCell = document.createElement('td');
                dateCell.textContent = new Date(expense.date).toLocaleDateString();
                
                const descCell = document.createElement('td');
                descCell.textContent = expense.description;
                
                const amountCell = document.createElement('td');
                amountCell.textContent = `UGX ${expense.amount.toLocaleString()}`;
                
                const categoryCell = document.createElement('td');
                categoryCell.textContent = expense.category;
                
                const actionsCell = document.createElement('td');
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn-danger';
                deleteBtn.textContent = 'Delete';
                deleteBtn.addEventListener('click', () => deleteExpense(index));
                
                actionsCell.appendChild(deleteBtn);
                
                row.appendChild(dateCell);
                row.appendChild(descCell);
                row.appendChild(amountCell);
                row.appendChild(categoryCell);
                row.appendChild(actionsCell);
                
                expensesTableEl.appendChild(row);
            });
        }

        function renderRecommendations() {
            const recommendations = [
                {
                    title: "Increase Your Savings Rate",
                    description: "Consider increasing your monthly savings by 10% to reach your goal faster. Even small increases can make a big difference over time.",
                    source: "Financial Planning Association"
                },
                {
                    title: "Track Your Expenses",
                    description: "Regularly tracking your expenses can help identify areas where you can cut back and save more money.",
                    source: "Personal Finance Experts"
                },
                {
                    title: "Invest Your Savings",
                    description: "Consider investing a portion of your savings in low-risk investments to potentially earn higher returns than a savings account.",
                    source: "Investment Advisors"
                },
                {
                    title: "Automate Your Savings",
                    description: "Set up automatic transfers to your savings account to ensure you consistently save without having to think about it.",
                    source: "Banking Experts"
                },
                {
                    title: "Reduce Discretionary Spending",
                    description: "Identify non-essential expenses you can reduce or eliminate to free up more money for your savings goal.",
                    source: "Budgeting Specialists"
                },
                {
                    title: "Increase Your Income",
                    description: "Consider side hustles or ways to increase your primary income to accelerate your savings progress.",
                    source: "Career Coaches"
                }
            ];
            
            recommendationsContainerEl.innerHTML = '';
            
            recommendations.forEach(recommendation => {
                const card = document.createElement('div');
                card.className = 'recommendation-card';
                
                const title = document.createElement('h3');
                title.className = 'recommendation-title';
                title.textContent = recommendation.title;
                
                const desc = document.createElement('p');
                desc.className = 'recommendation-description';
                desc.textContent = recommendation.description;
                
                const source = document.createElement('p');
                source.className = 'recommendation-source';
                source.textContent = `Source: ${recommendation.source}`;
                
                card.appendChild(title);
                card.appendChild(desc);
                card.appendChild(source);
                
                recommendationsContainerEl.appendChild(card);
            });
        }

        function initCharts() {
            // Expenses by category chart
            const expensesCtx = document.getElementById('expenses-chart').getContext('2d');
            
            // Group expenses by category
            const expenseCategories = {};
            expenses.forEach(expense => {
                if (!expenseCategories[expense.category]) {
                    expenseCategories[expense.category] = 0;
                }
                expenseCategories[expense.category] += expense.amount;
            });
            
            new Chart(expensesCtx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(expenseCategories),
                    datasets: [{
                        data: Object.values(expenseCategories),
                        backgroundColor: [
                            '#f72585',
                            '#b5179e',
                            '#7209b7',
                            '#560bad',
                            '#480ca8',
                            '#3a0ca3',
                            '#3f37c9'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
            
            // Savings progress chart
            const savingsCtx = document.getElementById('savings-chart').getContext('2d');
            
            // Calculate monthly savings progress
            const monthlySavings = {};
            transactions
                .filter(t => t.type === 'savings')
                .forEach(t => {
                    const date = new Date(t.date);
                    const monthYear = `${date.getMonth()+1}/${date.getFullYear()}`;
                    
                    if (!monthlySavings[monthYear]) {
                        monthlySavings[monthYear] = 0;
                    }
                    monthlySavings[monthYear] += t.amount;
                });
            
            new Chart(savingsCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(monthlySavings),
                    datasets: [{
                        label: 'Monthly Savings (UGX)',
                        data: Object.values(monthlySavings),
                        backgroundColor: '#4361ee',
                        borderColor: '#3f37c9',
                        borderWidth: 1
                    }, {
                        label: 'Monthly Target',
                        data: Object.keys(monthlySavings).map(() => monthlySavingsTarget),
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1,
                        type: 'line',
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function setupEventListeners() {
            // Transaction form
            addTransactionBtnEl.addEventListener('click', () => {
                transactionModalEl.style.display = 'block';
                document.getElementById('transaction-date').valueAsDate = new Date();
            });
            
            cancelTransactionBtnEl.addEventListener('click', () => {
                transactionModalEl.style.display = 'none';
            });
            
            transactionFormEl.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const type = document.getElementById('transaction-type').value;
                const amount = parseFloat(document.getElementById('transaction-amount').value);
                const date = document.getElementById('transaction-date').value;
                const description = document.getElementById('transaction-description').value;
                const category = document.getElementById('transaction-category').value;
                
                const transaction = {
                    type,
                    amount,
                    date,
                    description,
                    category
                };
                
                transactions.push(transaction);
                
                // If it's a savings deposit, update savings balance
                if (type === 'savings') {
                    savingsBalance += amount;
                }
                
                // Save and update UI
                saveData();
                updateDashboard();
                renderTransactions();
                initCharts(); // Refresh charts
                
                // Reset and hide form
                transactionFormEl.reset();
                transactionModalEl.style.display = 'none';
            });
            
            // Expense form
            addExpenseBtnEl.addEventListener('click', () => {
                expenseModalEl.style.display = 'block';
                document.getElementById('expense-date').valueAsDate = new Date();
            });
            
            cancelExpenseBtnEl.addEventListener('click', () => {
                expenseModalEl.style.display = 'none';
            });
            
            expenseFormEl.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const amount = parseFloat(document.getElementById('expense-amount').value);
                const date = document.getElementById('expense-date').value;
                const description = document.getElementById('expense-description').value;
                const category = document.getElementById('expense-category').value;
                
                const expense = {
                    amount,
                    date,
                    description,
                    category
                };
                
                expenses.push(expense);
                
                // Save and update UI
                saveData();
                updateDashboard();
                renderExpenses();
                initCharts(); // Refresh charts
                
                // Reset and hide form
                expenseFormEl.reset();
                expenseModalEl.style.display = 'none';
            });
            
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    // Refresh charts when switching to tabs that have them
                    if (tabId === 'expenses' || tabId === 'savings-plan') {
                        initCharts();
                    }
                });
            });
            
            // Update plan button
            document.getElementById('update-plan-btn').addEventListener('click', () => {
                const adjustment = document.getElementById('savings-adjustment').value;
                
                switch (adjustment) {
                    case 'increase':
                        monthlySavingsTarget = Math.round(monthlySavingsTarget * 1.1); // Increase by 10%
                        break;
                    case 'decrease':
                        monthlySavingsTarget = Math.round(monthlySavingsTarget * 0.9); // Decrease by 10%
                        break;
                    case 'extend':
                        // Recalculate monthly target with extended timeline (add 1 month)
                        const newMonths = 20; // Original 19 + 1
                        monthlySavingsTarget = Math.round(100000000 / newMonths);
                        break;
                    case 'reduce':
                        // Reduce goal amount by 10%
                        const newGoal = 90000000; // 90M instead of 100M
                        monthlySavingsTarget = Math.round(newGoal / 19);
                        break;
                }
                
                // Update UI
                monthlyTargetEl.textContent = `UGX ${monthlySavingsTarget.toLocaleString()}`;
                initCharts(); // Refresh savings chart
            });
        }

        function deleteTransaction(index) {
            const transaction = transactions[index];
            
            // If it's a savings deposit, subtract from savings balance
            if (transaction.type === 'savings') {
                savingsBalance -= transaction.amount;
            }
            
            // Remove transaction
            transactions.splice(index, 1);
            
            // Save and update UI
            saveData();
            updateDashboard();
            renderTransactions();
            initCharts(); // Refresh charts
        }

        function deleteExpense(index) {
            // Remove expense
            expenses.splice(index, 1);
            
            // Save and update UI
            saveData();
            updateDashboard();
            renderExpenses();
            initCharts(); // Refresh charts
        }
    </script>
</body>
</html>
